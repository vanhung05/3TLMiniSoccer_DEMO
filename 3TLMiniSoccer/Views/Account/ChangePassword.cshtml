@model _3TLMiniSoccer.ViewModels.ChangePasswordViewModel
@{
    ViewData["Title"] = "ƒê·ªïi m·∫≠t kh·∫©u";
    ViewData["Description"] = "Thay ƒë·ªïi m·∫≠t kh·∫©u t√†i kho·∫£n c·ªßa b·∫°n";
}

<!-- Change Password Section -->
<section class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full space-y-8" data-aos="fade-up">
        <div class="text-center">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">ƒê·ªïi m·∫≠t kh·∫©u</h2>
            <p class="text-gray-600">Thay ƒë·ªïi m·∫≠t kh·∫©u ƒë·ªÉ b·∫£o m·∫≠t t√†i kho·∫£n c·ªßa b·∫°n</p>
        </div>
        
        <div class="bg-white rounded-xl shadow-lg p-8">
            @if (TempData["SuccessMessage"] != null)
            {
                <div class="mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg">
                    @TempData["SuccessMessage"]
                </div>
            }
            
            @if (TempData["ErrorMessage"] != null)
            {
                <div class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg">
                    @TempData["ErrorMessage"]
                </div>
            }
            
            <form asp-action="ChangePassword" asp-controller="Account" method="post" class="space-y-6">
                <div asp-validation-summary="ModelOnly" class="text-red-600 mb-4"></div>
                
                <!-- Current Password -->
                <div class="floating-label">
                    <input 
                        asp-for="CurrentPassword"
                        type="password" 
                        placeholder=" "
                        class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                        required
                    >
                    <label asp-for="CurrentPassword">M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
                </div>
                <span asp-validation-for="CurrentPassword" class="text-red-600 text-sm"></span>
                
                <!-- New Password -->
                <div class="floating-label">
                    <input 
                        asp-for="NewPassword"
                        type="password" 
                        placeholder=" "
                        class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                        required
                    >
                    <label asp-for="NewPassword">M·∫≠t kh·∫©u m·ªõi</label>
                    <!-- Password Strength Indicator -->
                    <div class="mt-2">
                        <div class="password-strength bg-gray-200"></div>
                        <p class="text-xs text-gray-500 mt-1" id="passwordStrengthText">Nh·∫≠p m·∫≠t kh·∫©u ƒë·ªÉ ki·ªÉm tra ƒë·ªô m·∫°nh</p>
                    </div>
                </div>
                <span asp-validation-for="NewPassword" class="text-red-600 text-sm"></span>
                
                <!-- Confirm New Password -->
                <div class="floating-label">
                    <input 
                        asp-for="ConfirmPassword"
                        type="password" 
                        placeholder=" "
                        class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
                        required
                    >
                    <label asp-for="ConfirmPassword">X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi</label>
                </div>
                <span asp-validation-for="ConfirmPassword" class="text-red-600 text-sm"></span>
                
                <!-- Submit Button -->
                <button 
                    type="submit" 
                    class="btn-primary w-full py-3 px-4 rounded-lg text-white font-medium text-lg"
                >
                    ƒê·ªïi m·∫≠t kh·∫©u
                </button>
            </form>
            
            <!-- Back to Profile -->
            <div class="mt-6 text-center">
                <a asp-action="Profile" asp-controller="Account" class="text-primary hover:text-green-700 font-medium transition">
                    ‚Üê Quay l·∫°i th√¥ng tin c√° nh√¢n
                </a>
            </div>
        </div>
        
        <!-- Security Tips -->
        <div class="bg-blue-50 rounded-xl p-6">
            <h3 class="font-medium text-blue-900 mb-3">üí° M·∫πo b·∫£o m·∫≠t</h3>
            <ul class="text-sm text-blue-800 space-y-2">
                <li>‚Ä¢ S·ª≠ d·ª•ng √≠t nh·∫•t 8 k√Ω t·ª± bao g·ªìm ch·ªØ hoa, ch·ªØ th∆∞·ªùng, s·ªë v√† k√Ω t·ª± ƒë·∫∑c bi·ªát</li>
                <li>‚Ä¢ Kh√¥ng s·ª≠ d·ª•ng th√¥ng tin c√° nh√¢n d·ªÖ ƒëo√°n</li>
                <li>‚Ä¢ Thay ƒë·ªïi m·∫≠t kh·∫©u ƒë·ªãnh k·ª≥ ƒë·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t</li>
                <li>‚Ä¢ Kh√¥ng chia s·∫ª m·∫≠t kh·∫©u v·ªõi b·∫•t k·ª≥ ai</li>
            </ul>
        </div>
    </div>
</section>

@section Scripts {
    <style>
        .floating-label {
            position: relative;
        }
        
        .floating-label input:focus + label,
        .floating-label input:not(:placeholder-shown) + label {
            transform: translateY(-1.5rem) scale(0.85);
            color: #16a34a;
        }
        
        .floating-label label {
            position: absolute;
            left: 1rem;
            top: 1rem;
            transition: all 0.3s ease;
            pointer-events: none;
            color: #6b7280;
        }
        
        .form-input {
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(22, 163, 74, 0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(22, 163, 74, 0.3);
        }
        
        .password-strength {
            height: 4px;
            border-radius: 2px;
            transition: all 0.3s ease;
        }
        
        .strength-weak { background-color: #ef4444; width: 25%; }
        .strength-fair { background-color: #f59e0b; width: 50%; }
        .strength-good { background-color: #3b82f6; width: 75%; }
        .strength-strong { background-color: #16a34a; width: 100%; }
    </style>
    
    <script>
        // Password strength checker
        function checkPasswordStrength(password) {
            const strengthBar = document.querySelector('.password-strength');
            const strengthText = document.getElementById('passwordStrengthText');
            
            let strength = 0;
            let strengthLabel = '';
            
            if (password.length >= 8) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            
            switch (strength) {
                case 0:
                case 1:
                    strengthBar.className = 'password-strength strength-weak';
                    strengthLabel = 'M·∫≠t kh·∫©u y·∫øu';
                    break;
                case 2:
                    strengthBar.className = 'password-strength strength-fair';
                    strengthLabel = 'M·∫≠t kh·∫©u trung b√¨nh';
                    break;
                case 3:
                case 4:
                    strengthBar.className = 'password-strength strength-good';
                    strengthLabel = 'M·∫≠t kh·∫©u t·ªët';
                    break;
                case 5:
                    strengthBar.className = 'password-strength strength-strong';
                    strengthLabel = 'M·∫≠t kh·∫©u m·∫°nh';
                    break;
            }
            
            strengthText.textContent = strengthLabel;
        }
        
        // Password strength checker on input
        document.getElementById('NewPassword').addEventListener('input', function() {
            checkPasswordStrength(this.value);
        });
        
        // Form submission loading state
        document.querySelector('form').addEventListener('submit', function() {
            const submitBtn = this.querySelector('button[type="submit"]');
            submitBtn.textContent = 'ƒêang ƒë·ªïi m·∫≠t kh·∫©u...';
            submitBtn.disabled = true;
        });
        
        // Auto-focus first input
        document.getElementById('CurrentPassword').focus();
    </script>
}
